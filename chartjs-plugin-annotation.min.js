/*@preserve!
 * chartjs-plugin-annotation.js
 * http://chartjs.org/
 * Version: 0.5.8
 *
 * Copyright 2016 Evert Timberg
 * Released under the MIT license
 * https://github.com/chartjs/Chart.Annotation.js/blob/master/LICENSE.md
 */
!function a(l,r,s){function c(e,t){if(!r[e]){if(!l[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(u)return u(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var o=r[e]={exports:{}};l[e][0].call(o.exports,function(t){return c(l[e][1][t]||t)},o,o.exports,a,l,r,s)}return r[e].exports}for(var u="function"==typeof require&&require,t=0;t<s.length;t++)c(s[t]);return c}({1:[function(t,e,n){},{}],2:[function(n,t,e){t.exports=function(t){var o=t.helpers,l=n("./helpers.js")(t),a=n("./events.js")(t),r=t.Annotation.types;function i(t){l.decorate(t,"afterDataLimits",function(t,e){t&&t(e),l.adjustScaleRange(e)})}function e(i){return function(t,e){var n=t.annotation.options.drawTime;l.elements(t).filter(function(t){return i===(t.options.drawTime||n)}).forEach(function(t){t.configure(),t.transition(e).draw()})}}function s(t){var e=t.plugins;return(e&&e.annotation?e.annotation:null)||t.annotation||{}}return{id:"annotation",beforeInit:function(t){var e=t.options,n=t.annotation={elements:{},options:l.initConfig(s(e)),onDestroy:[],firstRun:!0,supported:!1};t.ensureScalesHaveIDs(),e.scales&&(n.supported=!0,o.each(e.scales.xAxes,i),o.each(e.scales.yAxes,i))},beforeUpdate:function(i){var o=i.annotation;if(o.supported){o.firstRun?o.firstRun=!1:o.options=l.initConfig(s(i.options));var a=[];o.options.annotations.forEach(function(t){var e=t.id||l.objectId();if(!o.elements[e]&&r[t.type]){var n=new r[t.type]({id:e,options:t,chartInstance:i});n.initialize(),o.elements[e]=n,t.id=e,a.push(e)}else o.elements[e]&&a.push(e)}),Object.keys(o.elements).forEach(function(t){-1===a.indexOf(t)&&(o.elements[t].destroy(),delete o.elements[t])})}},beforeDatasetsDraw:e("beforeDatasetsDraw"),afterDatasetsDraw:e("afterDatasetsDraw"),afterDraw:e("afterDraw"),afterInit:function(e){var t=e.annotation.options.events;if(o.isArray(t)&&0<t.length){var n=e.chart.canvas,i=a.dispatcher.bind(e);a.collapseHoverEvents(t).forEach(function(t){o.addEvent(n,t,i),e.annotation.onDestroy.push(function(){o.removeEvent(n,t,i)})})}},destroy:function(t){if(t&&t.annotation)for(var e=t.annotation.onDestroy;0<e.length;)e.pop()()}}}},{"./events.js":4,"./helpers.js":5}],3:[function(t,e,n){e.exports=function(t){var e=t.helpers;return t.Element.extend({initialize:function(){this.hidden=!1,this.hovering=!1,this._model=e.clone(this._model)||{},this.setDataLimits()},destroy:function(){},setDataLimits:function(){},configure:function(){},inRange:function(){},getCenterPoint:function(){},getWidth:function(){},getHeight:function(){},getArea:function(){},draw:function(){}})}},{}],4:[function(e,t,n){t.exports=function(t){var u=t.helpers,d=e("./helpers.js")(t);function f(t){var e=!1,n=t.filter(function(t){switch(t){case"mouseenter":case"mouseover":case"mouseout":case"mouseleave":return!(e=!0);default:return!0}});return e&&-1===n.indexOf("mousemove")&&n.push("mousemove"),n}return{dispatcher:function(a){var t=this.annotation,e=d.elements(this),n=u.getRelativePosition(a,this.chart),i=d.getNearestItems(e,n),o=f(t.options.events),l=t.options.dblClickSpeed,r=[],s=d.getEventHandlerName(a.type),c=(i||{}).options;if("mousemove"===a.type&&(i&&!i.hovering?["mouseenter","mouseover"].forEach(function(t){var e=d.getEventHandlerName(t),n=d.createMouseEvent(t,a);i.hovering=!0,"function"==typeof c[e]&&r.push([c[e],n,i])}):i||e.forEach(function(i){if(i.hovering){i.hovering=!1;var o=i.options;["mouseout","mouseleave"].forEach(function(t){var e=d.getEventHandlerName(t),n=d.createMouseEvent(t,a);"function"==typeof o[e]&&r.push([o[e],n,i])})}})),i&&-1<o.indexOf("dblclick")&&"function"==typeof c.onDblclick){if("click"===a.type&&"function"==typeof c.onClick)return clearTimeout(i.clickTimeout),i.clickTimeout=setTimeout(function(){delete i.clickTimeout,c.onClick.call(i,a)},l),a.stopImmediatePropagation(),void a.preventDefault();"dblclick"===a.type&&i.clickTimeout&&(clearTimeout(i.clickTimeout),delete i.clickTimeout)}i&&"function"==typeof c[s]&&0===r.length&&r.push([c[s],a,i]),0<r.length&&(a.stopImmediatePropagation(),a.preventDefault(),r.forEach(function(t){t[0].call(t[2],t[1])}))},collapseHoverEvents:f}}},{"./helpers.js":5}],5:[function(t,e,n){function i(){}function r(t){var e=t.annotation.elements;return Object.keys(e).map(function(t){return e[t]})}function o(){return Math.random().toString(36).substr(2,6)}function a(t){return null!=t&&("number"==typeof t?isFinite(t):!!t)}function s(e,n,i){e["$"+n]||(e[n]?(e["$"+n]=e[n].bind(e),e[n]=function(){var t=[e["$"+n]].concat(Array.prototype.slice.call(arguments));return i.apply(e,t)}):e[n]=function(){var t=[void 0].concat(Array.prototype.slice.call(arguments));return i.apply(e,t)})}function c(t,e){t.forEach(function(t){(e?t[e]:t)()})}function u(t){return"on"+t[0].toUpperCase()+t.substring(1)}function d(e,n){try{return new MouseEvent(e,n)}catch(t){try{var i=document.createEvent("MouseEvent");return i.initMouseEvent(e,n.canBubble,n.cancelable,n.view,n.detail,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,n.relatedTarget),i}catch(t){var o=document.createEvent("Event");return o.initEvent(e,n.canBubble,n.cancelable),o}}}e.exports=function(e){var l=e.helpers;return{initConfig:function(t){return t=l.configMerge(e.Annotation.defaults,t),l.isArray(t.annotations)&&t.annotations.forEach(function(t){t.label=l.configMerge(e.Annotation.labelDefaults,t.label)}),t},elements:r,callEach:c,noop:i,objectId:o,isValid:a,decorate:s,adjustScaleRange:function(t){var e,n,i,o,a,l=(e=t.id,n=r(t.chart),i=t.min,o=t.max,{min:(a=n.filter(function(t){return!!t._model.ranges[e]}).map(function(t){return t._model.ranges[e]})).map(function(t){return Number(t.min)}).reduce(function(t,e){return isFinite(e)&&!isNaN(e)&&e<t?e:t},i),max:a.map(function(t){return Number(t.max)}).reduce(function(t,e){return isFinite(e)&&!isNaN(e)&&t<e?e:t},o)});void 0===t.options.ticks.min&&void 0===t.options.ticks.suggestedMin&&(t.min=l.min),void 0===t.options.ticks.max&&void 0===t.options.ticks.suggestedMax&&(t.max=l.max),t.handleTickRangeOptions&&t.handleTickRangeOptions()},getNearestItems:function(t,o){var a=Number.POSITIVE_INFINITY;return t.filter(function(t){return t.inRange(o.x,o.y)}).reduce(function(t,e){var n=e.getCenterPoint(),i=l.distanceBetweenPoints(o,n);return i<a?(t=[e],a=i):i===a&&t.push(e),t},[]).sort(function(t,e){var n=t.getArea(),i=e.getArea();return i<n||n<i?n-i:t._index-e._index}).slice(0,1)[0]},getEventHandlerName:u,createMouseEvent:d}}},{}],6:[function(t,e,n){var i=t("chart.js");(i="function"==typeof i?i:window.Chart).Annotation=i.Annotation||{},i.Annotation.drawTimeOptions={afterDraw:"afterDraw",afterDatasetsDraw:"afterDatasetsDraw",beforeDatasetsDraw:"beforeDatasetsDraw"},i.Annotation.defaults={drawTime:"afterDatasetsDraw",dblClickSpeed:350,events:[],annotations:[]},i.Annotation.labelDefaults={backgroundColor:"rgba(0,0,0,0.8)",fontFamily:i.defaults.global.defaultFontFamily,fontSize:i.defaults.global.defaultFontSize,fontStyle:"bold",fontColor:"#fff",xPadding:6,yPadding:6,cornerRadius:6,position:"center",xAdjust:0,yAdjust:0,enabled:!1,content:null},i.Annotation.Element=t("./element.js")(i),i.Annotation.types={line:t("./types/line.js")(i),box:t("./types/box.js")(i),triangle:t("./types/triangle.js")(i)};var o=t("./annotation.js")(i);e.exports=o,i.pluginService.register(o)},{"./annotation.js":2,"./element.js":3,"./types/box.js":7,"./types/line.js":8,"./types/triangle.js":9,"chart.js":1}],7:[function(e,t,n){t.exports=function(t){var f=e("../helpers.js")(t);return t.Annotation.Element.extend({setDataLimits:function(){var t=this._model,e=this.options,n=this.chartInstance,i=n.scales[e.xScaleID],o=n.scales[e.yScaleID],a=n.chartArea;if(t.ranges={},a){var l=0,r=0;i&&(l=f.isValid(e.xMin)?e.xMin:i.getValueForPixel(a.left),r=f.isValid(e.xMax)?e.xMax:i.getValueForPixel(a.right),t.ranges[e.xScaleID]={min:Math.min(l,r),max:Math.max(l,r)}),o&&(l=f.isValid(e.yMin)?e.yMin:o.getValueForPixel(a.bottom),r=f.isValid(e.yMax)?e.yMax:o.getValueForPixel(a.top),t.ranges[e.yScaleID]={min:Math.min(l,r),max:Math.max(l,r)})}},configure:function(){var t=this._model,e=this.options,n=this.chartInstance,i=n.scales[e.xScaleID],o=n.scales[e.yScaleID],a=n.chartArea;t.clip={x1:a.left,x2:a.right,y1:a.top,y2:a.bottom};var l,r,s=a.left,c=a.top,u=a.right,d=a.bottom;i&&(l=f.isValid(e.xMin)?i.getPixelForValue(e.xMin):a.left,r=f.isValid(e.xMax)?i.getPixelForValue(e.xMax):a.right,s=Math.min(l,r),u=Math.max(l,r)),o&&(l=f.isValid(e.yMin)?o.getPixelForValue(e.yMin):a.bottom,r=f.isValid(e.yMax)?o.getPixelForValue(e.yMax):a.top,c=Math.min(l,r),d=Math.max(l,r)),t.left=s,t.top=c,t.right=u,t.bottom=d,t.borderColor=e.borderColor,t.borderWidth=e.borderWidth,t.backgroundColor=e.backgroundColor},inRange:function(t,e){var n=this._model;return n&&t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom},getCenterPoint:function(){var t=this._model;return{x:(t.right+t.left)/2,y:(t.bottom+t.top)/2}},getWidth:function(){var t=this._model;return Math.abs(t.right-t.left)},getHeight:function(){var t=this._model;return Math.abs(t.bottom-t.top)},getArea:function(){return this.getWidth()*this.getHeight()},draw:function(){var t=this._view,e=this.chartInstance.chart.ctx;e.save(),e.beginPath(),e.rect(t.clip.x1,t.clip.y1,t.clip.x2-t.clip.x1,t.clip.y2-t.clip.y1),e.clip(),e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,e.fillStyle=t.backgroundColor;var n=t.right-t.left,i=t.bottom-t.top;e.fillRect(t.left,t.top,n,i),e.strokeRect(t.left,t.top,n,i),e.restore()}})}},{"../helpers.js":5}],8:[function(e,t,n){t.exports=function(t){var f=t.helpers,h=e("../helpers.js")(t),b="horizontal",p="vertical";function g(e){var n=(e.x2-e.x1)/(e.y2-e.y1),i=e.x1||0;this.m=n,this.b=i,this.getX=function(t){return n*(t-e.y1)+i},this.getY=function(t){return(t-i)/n+e.y1},this.intersects=function(t,e,n){n=n||.001;var i=this.getY(t),o=this.getX(e);return(!isFinite(i)||Math.abs(e-i)<n)&&(!isFinite(o)||Math.abs(t-o)<n)}}return t.Annotation.Element.extend({setDataLimits:function(){var t=this._model,e=this.options;t.ranges={},t.ranges[e.scaleID]={min:e.value,max:e.endValue||e.value}},configure:function(){var t,e,n=this._model,i=this.options,o=this.chartInstance,a=o.chart.ctx,l=o.scales[i.scaleID];if(l&&(t=h.isValid(i.value)?l.getPixelForValue(i.value,i.value.index):NaN,e=h.isValid(i.endValue)?l.getPixelForValue(i.endValue,i.value.index):t),!isNaN(t)){var r=o.chartArea;n.clip={x1:r.left,x2:r.right,y1:r.top,y2:r.bottom},this.options.mode===b?(n.x1=r.left,n.x2=r.right,n.y1=t,n.y2=e):(n.y1=r.top,n.y2=r.bottom,n.x1=t,n.x2=e),n.line=new g(n),n.mode=i.mode,n.labelBackgroundColor=i.label.backgroundColor,n.labelFontFamily=i.label.fontFamily,n.labelFontSize=i.label.fontSize,n.labelFontStyle=i.label.fontStyle,n.labelFontColor=i.label.fontColor,n.labelXPadding=i.label.xPadding,n.labelYPadding=i.label.yPadding,n.labelCornerRadius=i.label.cornerRadius,n.labelPosition=i.label.position,n.labelXAdjust=i.label.xAdjust,n.labelYAdjust=i.label.yAdjust,n.labelEnabled=i.label.enabled,n.labelContent=i.label.content,a.font=f.fontString(n.labelFontSize,n.labelFontStyle,n.labelFontFamily);var s=a.measureText(n.labelContent).width,c=n.labelFontSize;if(n.labelHeight=c+2*n.labelYPadding,n.labelContent&&f.isArray(n.labelContent)){var u=n.labelContent.slice(0).sort(function(t,e){return e.length-t.length})[0];s=a.measureText(u).width,n.labelHeight=c*n.labelContent.length+2*n.labelYPadding,n.labelHeight+=n.labelYPadding*(n.labelContent.length-1)}var d=function(t,e,n,i,o){var a=t.line,l={},r=0,s=0;switch(!0){case t.mode===p&&"top"===t.labelPosition:s=o+t.labelYAdjust,r=e/2+t.labelXAdjust,l.y=t.y1+s,l.x=(isFinite(a.m)?a.getX(l.y):t.x1)-r;break;case t.mode===p&&"bottom"===t.labelPosition:s=n+o+t.labelYAdjust,r=e/2+t.labelXAdjust,l.y=t.y2-s,l.x=(isFinite(a.m)?a.getX(l.y):t.x1)-r;break;case t.mode===b&&"left"===t.labelPosition:r=i+t.labelXAdjust,s=-n/2+t.labelYAdjust,l.x=t.x1+r,l.y=a.getY(l.x)+s;break;case t.mode===b&&"right"===t.labelPosition:r=e+i+t.labelXAdjust,s=-n/2+t.labelYAdjust,l.x=t.x2-r,l.y=a.getY(l.x)+s;break;default:l.x=(t.x1+t.x2-e)/2+t.labelXAdjust,l.y=(t.y1+t.y2-n)/2+t.labelYAdjust}return l}(n,s,c,n.labelXPadding,n.labelYPadding);n.labelX=d.x-n.labelXPadding,n.labelY=d.y-n.labelYPadding,n.labelWidth=s+2*n.labelXPadding,n.borderColor=i.borderColor,n.borderWidth=i.borderWidth,n.borderDash=i.borderDash||[],n.borderDashOffset=i.borderDashOffset||0}},inRange:function(t,e){var n=this._model;return n.line&&n.line.intersects(t,e,this.getHeight())||n.labelEnabled&&n.labelContent&&t>=n.labelX&&t<=n.labelX+n.labelWidth&&e>=n.labelY&&e<=n.labelY+n.labelHeight},getCenterPoint:function(){return{x:(this._model.x2+this._model.x1)/2,y:(this._model.y2+this._model.y1)/2}},getWidth:function(){return Math.abs(this._model.right-this._model.left)},getHeight:function(){return this._model.borderWidth||1},getArea:function(){return Math.sqrt(Math.pow(this.getWidth(),2)+Math.pow(this.getHeight(),2))},draw:function(){var t=this._view,e=this.chartInstance.chart.ctx;if(t.clip){if(e.save(),e.beginPath(),e.rect(t.clip.x1,t.clip.y1,t.clip.x2-t.clip.x1,t.clip.y2-t.clip.y1),e.clip(),e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,e.setLineDash&&e.setLineDash(t.borderDash),e.lineDashOffset=t.borderDashOffset,e.beginPath(),e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.stroke(),t.labelEnabled&&t.labelContent)if(e.beginPath(),e.rect(t.clip.x1,t.clip.y1,t.clip.x2-t.clip.x1,t.clip.y2-t.clip.y1),e.clip(),e.fillStyle=t.labelBackgroundColor,f.drawRoundedRectangle(e,t.labelX,t.labelY,t.labelWidth,t.labelHeight,t.labelCornerRadius),e.fill(),e.font=f.fontString(t.labelFontSize,t.labelFontStyle,t.labelFontFamily),e.fillStyle=t.labelFontColor,e.textAlign="center",t.labelContent&&f.isArray(t.labelContent))for(var n=t.labelY+t.labelYPadding,i=0;i<t.labelContent.length;i++)e.textBaseline="top",e.fillText(t.labelContent[i],t.labelX+t.labelWidth/2,n),n+=t.labelFontSize+t.labelYPadding;else e.textBaseline="middle",e.fillText(t.labelContent,t.labelX+t.labelWidth/2,t.labelY+t.labelHeight/2);e.restore()}}})}},{"../helpers.js":5}],9:[function(e,t,n){function u(t,e,n){return(t.x-n.x)*(e.y-n.y)-(e.x-n.x)*(t.y-n.y)}t.exports=function(t){var f=e("../helpers.js")(t);return t.Annotation.Element.extend({setDataLimits:function(){var t=this._model,e=this.options,n=this.chartInstance,i=n.scales[e.xScaleID],o=n.scales[e.yScaleID],a=n.chartArea;if(t.ranges={},a){if(i){var l=f.isValid(e.points[0].x)?e.points[0].x:i.getValueForPixel(a.left),r=f.isValid(e.points[1].x)?e.points[1].x:i.getValueForPixel(a.right),s=f.isValid(e.points[2].x)?e.points[2].x:i.getValueForPixel(a.right);t.ranges[e.xScaleID]={min:Math.min(l,r,s),max:Math.max(l,r,s)}}if(o){var c=f.isValid(e.points[0].y)?e.points[0].y:o.getValueForPixel(a.bottom),u=f.isValid(e.points[1].y)?e.points[1].y:o.getValueForPixel(a.bottom),d=f.isValid(e.points[2].y)?e.points[2].y:o.getValueForPixel(a.bottom);t.ranges[e.yScaleID]={min:Math.min(c,u,d),max:Math.max(c,u,d)}}}},configure:function(){var t=this._model,e=this.options,n=this.chartInstance,i=n.scales[e.xScaleID],o=n.scales[e.yScaleID],a=n.chartArea;t.clip={x1:a.left,x2:a.right,y1:a.top,y2:a.bottom},i&&o&&(t.points=e.points.map(function(t){return{x:i.getPixelForValue(t.x),y:o.getPixelForValue(t.y)}})),t.borderColor=e.borderColor,t.borderWidth=e.borderWidth,t.backgroundColor=e.backgroundColor},inRange:function(t,e){var n,i,o,a,l,r,s,c=this._model;return c&&(n={x:t,y:e},i=c.points[0],o=c.points[1],a=c.points[2],l=u(n,i,o)<=0,r=u(n,o,a)<=0,s=u(n,a,i)<=0,l==r&&r==s)},getCenterPoint:function(){var t=this._model;return{x:(t.points[0].x+t.points[1].x+t.points[2].x)/3,y:(t.points[0].y+t.points[1].y+t.points[2].y)/3}},getWidth:function(){var t=this._model;return console.log("WIDTH"),Math.abs(t.right-t.left)},getHeight:function(){var t=this._model;return console.log("HEIGHT"),Math.abs(t.bottom-t.top)},getArea:function(){return console.log("AREA"),this.getWidth()*this.getHeight()},draw:function(){var t=this._model,e=this.chartInstance.chart.ctx;e.save(),e.beginPath(),e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,e.fillStyle=t.backgroundColor,e.moveTo(t.points[0].x,t.points[0].y),e.lineTo(t.points[1].x,t.points[1].y),e.lineTo(t.points[2].x,t.points[2].y),e.closePath(),e.stroke(),e.fill(),e.restore()}})}},{"../helpers.js":5}]},{},[6]);